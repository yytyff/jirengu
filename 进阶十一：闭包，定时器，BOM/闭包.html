<!DOCTYPE html>
<html>
<head>
	<title>闭包</title>
	<meta charset="utf-8">
	<style>
		li{
			border:1px solid;
		}
	</style>
</head>
<body>
	<ul>
		<li class="item">1</li>
		<li class="item">2</li>
		<li class="item">3</li>
		<li class="item">4</li>
	</ul>

<script>
	var fnArr = [];
    for (var i = 0; i < 10; i ++) {
    	(function(n){
    		fnArr[i] =  function(){
    			var s = n;
    	    	return s;
        	};
    	})(i)
        
    }
    console.log( fnArr[3]() );//立刻执行函数
//----------------------------------------------
    var fnArr = [];
	for (var i = 0; i < 10; i ++) {
    	(function(){
    		var s = i;
    		fnArr[i] =  function(){
    	    	return s;
        	};
    	})()
        
    }
	console.log( fnArr[3]() ); 

//-------------------------------------------
	var fnArr = [];
	for(var i =0; i<10; i ++) {
		fnArr[i] = (function(){
			var n =i;
			return function(){
				return n;
			}
		})();
	}
	console.log( fnArr[3]() ); 
//-----------------------------------------------
	for (var i = 0; i < 5; i++) {
		(function(){
			var n = i;
			setTimeout(function(){
				console.log('delayer:' +n);
			},0);
		})()
		
		console.log(i);
	}

//-------------------------------------------

    // (function(){
    //	var a =1;
    //})()
    //(function(){
   // 	var a =2;   
   // })()      //生成了两个闭包
/*
   (function(n){
   		var n =0;
		fnArr[i] =  function(){
	    	return n;
    	};
	})(0)
*/

//-------------------------------------------
	
    var nodes = document.querySelectorAll('.item');
/*	for (var i = 0; i < nodes.length; i++) {
		nodes[i].addEventListener('click',function(e){
			console.log(e.target.innerText);
		})
	}
2,	*/
	for (var i = 1; i <= nodes.length; i++) {
		nodes[i-1].onclick = (function(){
			var n =i;
			return function(){
				console.log(n);
			}
			
		})()
	}
//--------------------------------------------




</script>
</body>
</html>